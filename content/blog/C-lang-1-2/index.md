---
title: C-through - 1.2. 두번째 예제
date: "2021-07-02T00:00:00Z"
description: "부제 : C언어와 떠나는 여행 - 1.2 두번째 예제"
tags: ["C", "language"]
---

### 1. 두번째 프로그램

K&R에서는 바로 C언어의 문법을 가르치지 않는다. 간단한 프로그램을 짜 보면서 먼저 C언어에 대한 감부터 잡게
하는 방식을 사용하고 있다. 따라서 우리는 본격적으로 C언어의 문법들을 세세하게 접하기 전에 복잡하지는
않지만 감을 잡는 데에 충분히 도움이 될 만한 프로그램을 몇 가지 짜 보게 된다.

이번 글에서는 그런 접근 방식을 따라서, 간단한 두 번째 프로그램을 작성하면서 C언어에 대한 감을 잡는다.
두번째 프로그램은 바로 화씨를 섭씨로 환산한 값을 인쇄해 주는 프로그램이다.

코드는 다음과 같다.

```c
#include <stdio.h>

/* 화씨 0, 20, ... , 300도에 대해
	화씨 - 섭씨 표를 출력한다 */

main() {
	int fahr, celsius;
	int lower, upper, step;

	lower = 0;
	upper = 300;
	step = 20;
	fahr = lower;

	while (fahr <= upper) {
		celsius = 5 * (fahr - 32) / 9;
		printf("%d\t%d\n", fahr, celsius);
		fahr = fahr + step;
	}
}
```

### 2. 두번째 프로그램 설명

코드를 구성하는 요소를 하나씩 설명해 보자.

`#include <stdio.h>`

이는 지난 글에서 다루었으므로 생략한다. 입출력 함수를 다루게 해주는 라이브러리를 쓰게 해주는 부분이다.

`/* 화씨 0, 20, ... , 300도에 대해
화씨 - 섭씨 표를 출력한다 */`

`/* */` 로 감싸인 부분은 주석이다. 이걸로 감싸인 부분은 코드를 컴파일할 때 무시된다.
이런 주석은 프로그램의 수월한 이해를 위해서 쓰일 수 있다.
공백, 탭, 개행이 들어올 수 있는 어느 위치에나 주석은 들어갈 수 있는데,
이는 거의 코드의 어느 부분에서나 쓰일 수 있다는 것을 의미한다.

주석을 쓰는 방법 중 하나는 충분히 작동하지만 지금은 쓰지 않는 코드를 통째로
주석 처리해 놓는 것이다. 그렇게 하면 그 코드가 필요해질 때 언제든 주석을 해제하여 사용할 수 있다.

`int fahr, celsius;
int lower, upper, step;`

다음 줄은 변수를 정의하는 부분이다. C언어에서 변수는 사용되기 전에 무조건 정의되어야 한다.
변수는 간단히 생각하면 프로그램에서 쓸 어떤 값을 담아둘 공간이라고 생각하면 된다.
이를테면 a+1=2 같은 식이 있을 때 우리는 자연스럽게 a에 1을 대입해서 생각한다.
이런 식으로 프로그램에서 쓰이는 값들을 저장해 놓는 것이 바로 변수이다.

그런데 우리는 변수를 쓰기 전에 그 변수에 어떤 종류의 값을 저장할 것인지
얼만큼의 메모리를 할당할지 또 어떤 이름을 붙일지를 알려줘야 한다.
변수의 정의는 우리가 알려줘야 할 정보들을 담은, 변수의 종류(타입)와 변수명들로 이루어진다.

그럼 위 코드에서 나온 int 타입이란 무엇인가를 설명하지 않을 수 없다.
이 타입이란 것은 변수에 어떤 종류의 값을 저장할 것이며 그걸 위해 얼만큼의 메모리가 필요한지를
컴파일러에 지시한다.

여기서는  int는 정수형이며 문자를 나타내는 char, 실수형을 나타내는 float, double등의 
다른 여러가지 타입들이 있다는 것만 짚고 넘어간다.

또한 이러한 타입들로 이루어진 배열(array), 구조체(structure), 공용체(union) 그리고
관련된 포인터와 함수들도 존재한다. 이 시리즈를 진행하면서 하나하나 배워나갈 것이다.

따라서 위의 코드는 int타입의 변수를 `fahr, celcius` 등의 이름으로 5개 정의한다.

`lower = 0;
upper = 300;
step = 20;
fahr = lower;`

각 변수에 값을 할당하는 코드이다. 몇몇 변수에 0,300,20 등의 값을 대입하였으며
`fahr=lower` 에서는 변수끼리 대입하기도 한다.

이때 많은 온도들을 한번에 환산해야 하므로 우리는 반복문을 사용하기로 한다.
반복문은 지금으로서는 그냥 비슷한 작업을 여러 번 반복하게 하는 의미라고 생각하자.

`c
while (fahr <= upper) {
    ...
}
`

`while` 은 반복에 쓰이는 문법이다.
`while` 뒤의 소괄호 안의 문(여기서는 `fahr <= upper`)이 참인지 테스트하여 참이면 중괄호 안의 문장을 실행한다.
중괄호 안의 코드가 끝나면 다시 소괄호 안의 문이 참인지 테스트한다.
이러한 동작을 반복하다가 소괄호 안의 문장이 거짓이 되면 반복문을 종료한다.

이를 보여주는 예시인데, 다음 코드는 
`
1
2
3
4
5
`
를 출력한다.

```c
#include <stdio.h>

main() {
    int i;
    i = 1;
    while (i <= 5) {
        printf("%d\n", i);
        i = i + 1;
    }
}
```

이때 우리는 while 뒤의 중괄호 안의 코드를 모두 들여쓰기해 주었다.
어떤 부분이 while 반복문 안에 들어 있는지 한눈에 알 수 있게 해주려는 목적이다.
이러한 들여쓰기는 코드의 동작과는 연관성이 없지만 가독성을 매우 높여주기 때문에 대부분의 에디터에서 자동으로 해준다. 

만약 그렇지 않다면 들여쓰기는 가독성에 매우 큰 영향을 미치므로 신경써 주자.
이렇게 코드를 가독성 좋게 짜는 것은 남과 같이 협업할 때도, 또 심지어 자신의 코드를 읽을 때도 도움이 된다.

중괄호를 어떤 스타일로 쓰느냐도 사람들 간에 많은 논쟁이 있지만 그건 적절한 스타일을 택하기만 하면 된다.
가독성을 높이는 이러한 조치들은 대부분의 에디터에서 이미 자동으로 해주므로, 알고만 있자.

`celsius = 5 * (fahr - 32) / 9;
printf("%d\t%d\n", fahr, celsius);
fahr = fahr + step;`

화씨 온도에 적절한 환산식을 적용해서 섭씨 온도 변수에 대입해 주는 부분이다.
그리고 화씨 온도와 그에 대응되는 섭씨 온도를 출력해 준다.

이때 `(fahr - 32)` 에 $ 5/9 $ 를 곱해주는 것이 아니라 5를 곱한 후 9로 나누는 것에 주목하라.
이는 C에서 정수 나눗셈의 몫은 무조건 정수가 되고 소수점은 버리므로 `5/9`의 값은 0이 되기 때문이다.
따라서 의미있는 값을 얻기 위해서는 위와 같이 해야 한다.

또한 위의 `printf` 가 들어간 문장은 `printf` 가 어떻게 동작하는지를 보여준다.
`printf`의 첫번째 인자는 출력될 문자열이다. 이때 문자열에 `%`가 들어간 포맷 문자열이 있을 경우
이는 다른 인수들의 값으로 치환된다. 이에 대해서는 후에 더 자세히 다룬다.

그러나 `printf`는 C언어의 일부는 아니다. C언어 자체에는 입출력이 없다. 
그저 표준 라이브러리에 동작이 정의되어 있는 함수일 뿐이며 그 내부적인 구현은 구현체에 따라 조금씩 다르다.
단 `printf`의 동작은 표준에 정의되어 있으므로 어느 컴파일러에서나 똑같이 동작한다.

이러한 입출력 관련 문제들은 C언어 자체의 문법과는 큰 관련이 없으므로 마지막에 가서 다루기로 한다.

### 3. 몇 가지 개선

